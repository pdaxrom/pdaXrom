 drivers/mmc/mmc_block.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/drivers/mmc/mmc_block.c drivers/mmc/mmc_block.c
index 21e972f..fc67564 100644
--- a/drivers/mmc/mmc_block.c
+++ drivers/mmc/mmc_block.c
@@ -300,6 +300,7 @@ static struct mmc_blk_data *mmc_blk_allo
 {
 	struct mmc_blk_data *md;
 	int devidx, ret;
+	unsigned long cap;
 
 	devidx = find_first_zero_bit(dev_use, MMC_NUM_MINORS);
 	if (devidx >= MMC_NUM_MINORS)
@@ -407,6 +408,11 @@ static struct mmc_blk_data *mmc_blk_allo
 	sprintf(md->disk->disk_name, "mmcblk%d", devidx);
 	sprintf(md->disk->devfs_name, "mmc/blk%d", devidx);
 
+	if (card->csd.read_blkbits > 9)
+		md->block_bits = 9;
+	else
+		md->block_bits = card->csd.read_blkbits;
+
 	blk_queue_hardsect_size(md->queue.queue, 1 << md->block_bits);
 
 	/*
